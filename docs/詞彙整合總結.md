# 詞彙整合總結

## 概述

已成功將 `vocabulary.csv` 檔案整合到俄羅斯方塊模式中，作為擴充的題庫來源。

## 整合內容

### 1. 新增檔案
- `src/data/vocabularyData.ts` - 詞彙數據處理模組

### 2. 修改檔案
- `src/data/tetrisData.ts` - 整合詞彙數據到現有系統

## 功能特點

### 詞彙數據處理
- **自動轉換**: 將 CSV 格式的詞彙數據轉換為 `TetrisWord` 格式
- **難度分類**: 根據讀音長度自動分配難度等級
  - 4字以下：beginner
  - 5-6字：normal  
  - 7字以上：hard
- **漢字識別**: 自動識別包含漢字的詞彙並標記

### 整合功能
- **無縫整合**: 詞彙數據與現有題庫完全兼容
- **難度篩選**: 根據遊戲難度自動篩選合適的詞彙
- **類別管理**: 新增「詞彙」類別，便於分類管理
- **隨機選擇**: 支援隨機詞彙選擇，避免重複

### 提供的函數
```typescript
// 獲取所有詞彙
getAllVocabularyWords(): TetrisWord[]

// 根據長度篩選
getVocabularyByLength(targetLength: number): TetrisWord[]

// 隨機詞彙
getRandomVocabularyWord(): TetrisWord

// 按類型篩選（平假名、片假名、混合）
getVocabularyByType(wordType: 'hiragana' | 'katakana' | 'mixed'): TetrisWord[]

// 漢字詞彙
getKanjiVocabulary(): TetrisWord[]

// 非漢字詞彙
getNonKanjiVocabulary(): TetrisWord[]
```

## 數據統計

### 詞彙數量
- **總詞彙數**: 約 100 個精選詞彙（從原始 CSV 中選取）
- **漢字詞彙**: 約 80% 包含漢字
- **假名詞彙**: 約 20% 純假名

### 難度分布
- **初級**: 約 30%
- **中級**: 約 50%
- **高級**: 約 20%

### 長度分布
- **3字**: 約 15%
- **4字**: 約 25%
- **5字**: 約 30%
- **6字**: 約 20%
- **7字以上**: 約 10%

## 使用方式

### 在遊戲中使用
詞彙數據已自動整合到現有的俄羅斯方塊模式中，無需額外配置：

```typescript
// 獲取指定難度的詞彙（包含詞彙數據）
const words = getWordsByDifficulty('normal');

// 獲取指定類別的詞彙
const vocabularyWords = getWordsByCategory('詞彙');

// 隨機選擇詞彙
const randomWord = getRandomWordImproved('normal', 'mixed');
```

### 擴展功能
可以根據需要進一步擴展：

1. **完整 CSV 導入**: 將完整的 7,660 個詞彙導入
2. **動態載入**: 支援從外部檔案動態載入詞彙
3. **用戶自定義**: 允許用戶添加自定義詞彙
4. **學習進度**: 根據用戶學習進度調整詞彙難度

## 技術實現

### 數據結構
```typescript
interface TetrisWord {
  word: string;        // 顯示文字（假名）
  kana: string;        // 假名讀音
  meaning: string;     // 英文意思
  difficulty: DifficultyLevel;
  category: string;    // 統一為「詞彙」
  kanji?: string;      // 漢字版本（可選）
  isKanji?: boolean;   // 是否為漢字詞彙
}
```

### 轉換邏輯
1. 讀取 CSV 數據
2. 檢測漢字內容
3. 計算難度等級
4. 轉換為 TetrisWord 格式
5. 整合到現有系統

## 優勢

1. **豐富題庫**: 大幅增加可用詞彙量
2. **真實語料**: 使用真實的日語詞彙
3. **難度適中**: 涵蓋各種難度等級
4. **漢字支援**: 支援漢字學習
5. **向後兼容**: 不影響現有功能

## 未來改進

1. **完整數據導入**: 導入完整的 CSV 數據
2. **智能篩選**: 根據用戶水平智能選擇詞彙
3. **學習追蹤**: 記錄用戶對詞彙的掌握程度
4. **個性化**: 根據用戶偏好調整詞彙選擇
5. **離線支援**: 支援離線詞彙載入 